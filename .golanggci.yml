run:
  concurrency: 4
  timeout: 1m
  issues-exit-code: 1
  tests: true
  build-tags:
    - mytag
  modules-download-mode: readonly
  allow-parallel-runners: false

output:
  format: colored-line-number
  print-issued-lines: true
  print-linter-name: true
  uniq-by-line: true
  path-prefix: ""
  sort-results: false

linters-settings:
  cyclop:
    max-complexity: 10
    package-average: 0.0
    skip-tests: false

  dogsled:
    max-blank-identifiers: 2

  errcheck:
    check-type-assertions: false
    check-blank: false

  gocognit:
    min-complexity: 10

  gocritic:
    enabled-checks:
      - rangeValCopy
    disabled-checks:
      - regexpMust
    enabled-tags:
      - performance
    disabled-tags:
      - experimental
    settings:
      captLocal:
        paramsOnly: true
      elseif:
        skipBalanced: true
      hugeParam:
        sizeThreshold: 80
      nestingReduce:
        bodyWidth: 5
      rangeExprCopy:
        sizeThreshold: 512
        skipTestFuncs: true
      rangeValCopy:
        sizeThreshold: 32
        skipTestFuncs: true
      ruleguard:
        rules: ''
      truncateCmp:
        skipArchDependent: true
      underef:
        skipRecvDeref: true
      unnamedResult:
        checkExported: true

    gocyclo:
      min-complexity: 10

    godot:
      scope: declarations
      capital: false

    gofmt:
      simplify: true

    gofumpt:
      extra-rules: false

    golint:
      min-confidence: 0.8

    gomnd:
      settings:
        mnd:
          checks: argument,case,condition,operation,return,assign

    gomoddirectives:
      replace-local: false
      replace-allow-list:
        - launchpad.net/gocheck
      retract-allow-no-explanation: false
      exclude-forbidden: false

    gosec:
      includes:
        - G401
        - G306
        - G101
      excludes:
        - G204
      config:
        G306: "0600"
        G101:
          pattern: "(?i)example"
          ignore_entropy: false
          entropy_threshold: "80.0"
          per_char_threshold: "3.0"
          truncate: "32"

    gosimple:
      go: "1.15"
      checks: [ "all" ]

    govet:
      check-shadowing: true
      enable:
        - atomicalign
      enable-all: false
      disable:
        - shadow
      disable-all: false

    depguard:
      list-type: blacklist
      include-go-root: false
      packages:
        - github.com/sirupsen/logrus
      packages-with-error-message:
        - github.com/sirupsen/logrus: "logging is allowed only by logutils.Log"

    ifshort:
      max-decl-lines: 1
      max-decl-chars: 30

    importas:
      no-unaliased: true
      alias:
        - pkg: knative.dev/serving/pkg/apis/serving/v1
          alias: servingv1
        - pkg: knative.dev/serving/pkg/apis/autoscaling/v1alpha1
          alias: autoscalingv1alpha1
        - pkg: knative.dev/serving/pkg/apis/(\w+)/(v[\w\d]+)
          alias: $1$2

    lll:
      line-length: 120
      tab-width: 1

    makezero:
      always: false

    maligned:
      suggest-new: true

    misspell:
      locale: US
      ignore-words:
        - someword

    nakedret:
      max-func-lines: 50

    promlinter:
      strict: false

    predeclared:
      ignore: ""
      q: false

    nolintlint:
      allow-unused: false
      allow-leading-space: true
      allow-no-explanation: [ ]
      require-explanation: true
      require-specific: true

    rowserrcheck:
      packages:
        - github.com/jmoiron/sqlx

    revive:
      # see https://github.com/mgechev/revive#available-rules for details.
      ignore-generated-header: true
      severity: warning
      rules:
        - name: indent-error-flow
          severity: warning
        - name: add-constant
          severity: warning
          arguments:
            - maxLitCount: "3"
              allowStrs: '""'
              allowInts: "0,1,2"
              allowFloats: "0.0,0.,1.0,1.,2.0,2."

    staticcheck:
      go: "1.15"
      checks: [ "all" ]

    stylecheck:
      go: "1.15"
      checks: [ "all", "-ST1000", "-ST1003", "-ST1016", "-ST1020", "-ST1021", "-ST1022" ]
      dot-import-whitelist:
        - fmt
      initialisms: [ "ACL", "API", "ASCII", "CPU", "CSS", "DNS", "EOF", "GUID", "HTML", "HTTP", "HTTPS", "ID", "IP", "JSON", "QPS", "RAM", "RPC", "SLA", "SMTP", "SQL", "SSH", "TCP", "TLS", "TTL", "UDP", "UI", "GID", "UID", "UUID", "URI", "URL", "UTF8", "VM", "XML", "XMPP", "XSRF", "XSS" ]
      http-status-code-whitelist: [ "200", "400", "404", "500" ]

    tagliatelle:
      case:
        use-field-name: true
        rules:
          json: camel
          yaml: camel
          xml: camel
          bson: camel
          avro: snake
          mapstructure: kebab

    testpackage:
      skip-regexp: (export|internal)_test\.go

    thelper:
      test:
        first: true
        name: true
        begin: true
      benchmark:
        first: true
        name: true
        begin: true
      tb:
        first: true
        name: true
        begin: true

    unparam:
      check-exported: false

    unused:
      go: "1.15"

    whitespace:
      multi-if: false
      multi-func: false

    wrapcheck:
      ignoreSigs:
        - .Errorf(
        - errors.New(
        - errors.Unwrap(
        - .Wrap(
        - .Wrapf(
        - .WithMessage(

    wsl:
      allow-assign-and-anything: false
      allow-assign-and-call: true
      allow-cuddle-declarations: false
      allow-multiline-assign: true
      allow-separated-leading-comment: false
      allow-trailing-comment: false
      force-case-trailing-whitespace: 0
      force-err-cuddling: false
      force-short-decl-cuddling: false
      strict-append: true

    custom:
      example:
        path: /path/to/example.so
        description: This is an example usage of a plugin linter.
        original-url: github.com/golangci/example-linter

linters:
  disable-all: true
  enable:
    - megacheck
    - govet
  enable-all: true
  disable:
    - maligned
    - prealloc
  presets:
    - bugs
    - unused
  fast: false

issues:
  exclude:
    - abcdef
  exclude-rules:
    - path: _test\.go
      linters:
        - gocyclo
        - errcheck
        - dupl
        - gosec
    - path: internal/hmac/
      text: "weak cryptographic primitive"
      linters:
        - gosec
    - linters:
        - staticcheck
      text: "SA9003:"
    - linters:
        - lll
      source: "^//go:generate "

  exclude-use-default: false
  exclude-case-sensitive: false
  include:
    - EXC0002
  max-issues-per-linter: 0
  max-same-issues: 0
  new: false
  fix: true

severity:
  default-severity: error
  case-sensitive: false
  rules:
    - linters:
        - dupl
      severity: info
